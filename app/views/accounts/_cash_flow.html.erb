<hr>
<table width="90%">
  <tr>
    <th>Data</th>
    <th>Cliente/Fornecedor</th>
    <th>Descritivo</th>
    <th align='right'>Débito</th>
    <th align='right'>Crédito</th>
    <th align='right'>Saldo</th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
    <th>&nbsp;</th>
  </tr>
<% credit = 0 %>
<% debit  = 0 %>
<% data.each do |entry| %>
  <tr>
    <% if entry.is_a? Entry %>
      <td><%= entry.entry_date.to_s_br %></td>
      <td><%= entry.client && entry.client.name %></td>
      <td><%= entry.description %></td>
      <td>&nbsp;</td>
      <td align='right'><%= entry.value.real %></td>
      <% credit += entry.value %>
    <% else %>
      <td><%= entry.payment_date.to_s_br %></td>
      <td><%= entry.supplier && entry.supplier.name %></td>
      <td><%= entry.description %></td>
      <td align='right'><%= entry.value.real %></td>
      <td>&nbsp;</td>
      <% debit += entry.value %>
    <% end %>
    <td align='right'><%= (credit - debit).real %></td>
    <td align="right" width="25px"><%= link_to image_tag("info.png", :size=>"20x20", :border=>0, :title=>"Detalhes"), entry %></td>
    <td align="center" width="25px">
      <%= link_to image_tag("edit.png", :size=>"20x20", :border=>0, :title=>"Editar"), entry.is_a?(Entry) ? edit_entry_path(entry) : edit_account_path(entry) %>
    </td>
    <td align="left" width="25px"><%= link_to image_tag("trash.jpg",:size=>"20x20", :border=>0, :title=>"Excluir"), entry, :confirm => 'Tem certeza que quer excluir o registro?', :method => :delete %></td>
  </tr>
<% end %>
<tr>
  <td colspan="3">&nbsp;</td>
  <td align='right'><%= debit.real %></td>
  <td align='right'><%= credit.real %></td>
  <td>&nbsp;</td>
</tr>
</table>

<br />

<%= link_to image_tag("plus2.png", :size=>"40x40", :border=>0, :title=>"Adicionar"), new_account_path %>
